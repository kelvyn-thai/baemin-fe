"use strict";(self.webpackChunkbaemin_fe=self.webpackChunkbaemin_fe||[]).push([[96],{1017:function(e,t,r){function n(e){var t=e.className,r=e.isCenterAbsolute;e=(0,s.Z)(e,i);return(0,u.jsx)("div",(0,a.Z)((0,a.Z)({className:"".concat(r&&"h-8 flex items-center justify-center"," ").concat(t)},e),{},{children:(0,u.jsx)("i",{className:"fa-solid fa-spinner fa-spin-pulse fa-xl text-primary-color"})}))}var a=r(1413),s=r(4925),c=r(2791),u=r(184),i=["className","isCenterAbsolute"];n.defaultProps={className:"",isCenterAbsolute:!0},t.Z=c.memo(n)},3917:function(e,t,r){function n(e){return function(t){var r=(n=(0,s.q)()).isLoggedIn,n=n.userInfo,i=(0,c.TH)();return r?(r=t.children,t.userRole!==n.role&&"/"!==i.pathname?(0,u.jsx)(c.Fg,{to:"/",replace:!0}):(0,u.jsx)(e,(0,a.Z)((0,a.Z)({},(0,a.Z)({},t)),{},{children:r}))):(0,u.jsx)(c.Fg,{to:"/login",replace:!0})}}r.d(t,{Kf:function(){return i}});var a=r(1413),s=r(6885),c=(r(2791),r(7689)),u=r(184),i=n((function(e){return e.children}));n((function(e){return e.children}))},1039:function(e,t,r){function n(e){var t=e.children,r=e.onEndReached,n=void 0===(c=e.threshold)?10:c,c=e.className,u=e.data,i=e.renderItem;e=a.useCallback((function(e){var t=(e=e.currentTarget).scrollHeight,a=e.scrollTop;t<e.clientHeight+a+n&&"function"==typeof r&&r()}),[r]);return(0,s.jsxs)("div",{className:"scroll-view overflow-x-hidden overflow-y-scroll ".concat(c||""),onScroll:e,children:[u.map((function(e){return i(e)})),t]})}r.d(t,{Z:function(){return c}});var a=r(2791),s=r(184);n.defaultProps={threshold:100,onEndReached:void 0,className:""};var c=a.memo(n)},6885:function(e,t,r){r.d(t,{q:function(){return n.q}});var n=r(208)},4108:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var n=r(1017),a=(t=r(2791),r(6731)),s=r(4165),c=r(5861),u=r(7408),i=r(5824),o=new(r(7928).Z)({baseURL:"".concat(i.V.REACT_APP_API_DOMAIN_URL,"/category")}),d=r(184),l=t.memo((function(){var e,t=(0,u.useQuery)({queryFn:(e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get("");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),queryKey:["categories"]}),r=t.isLoading;t=void 0===(t=t.data)?[]:t;return(0,d.jsxs)("div",{className:"grid grid-cols-4 gap-4 items-center justify-center mt-4",children:[r&&(0,d.jsx)(n.Z,{}),t.map((function(e){var t=e.id,r=e.name;e=e.imgURL;return(0,d.jsxs)(a.rU,{className:"",to:"/merchant?categoryId=".concat(t),children:[(0,d.jsx)("div",{className:"h-24",children:(0,d.jsx)("img",{src:e,alt:r})}),(0,d.jsx)("div",{className:"text-center",children:r})]},t)}))]})}))},1096:function(e,t,r){function n(){var e=void 0===(R=(0,v.S)().data)?[]:R,t=void 0===(R=(0,x.AN)().data)?{}:R,r=void 0===(R=(0,x.KS)().data)?[]:R,n=(R=g()).direction,a=R.actionSetDirection,s=R.actionSetMerchant,b=R.merchants,Z=R.option,j=R.actionSetOption,N=R.status,k=R.actionSetStatus,S=R.customer,A=R.actionSetCustomer,R=c.useMemo((function(){switch(Z){case"Customer":return(0,w.jsx)(l.Z,{type:"input",containerClassName:"find-by-customer",optionProps:{value:S,onChange:function(e){return A(e.target.value)},placeholder:"Type customer name / address..."}});case"Created Time":case"Updated Time":return(0,w.jsx)(u.e,{direction:n,setDirection:a});case"Merchant":return(0,w.jsx)(d.Z,{options:e.map((function(e){return{value:e.id}})),selected:b,setSelected:function(e){return s(e)}});case"Status":return(0,w.jsx)(d.Z,{options:Object.values(t).map((function(e){return{value:e}})),selected:N,setSelected:function(e){return k(e)}});default:return null}}),[Z,n,e,b,y,t,N,S]),C=c.useMemo((function(){switch(Z){case"Created Time":return m()(r,(function(e){return e.createdTime}),n);case"Updated Time":return m()(r,(function(e){return e.updatedTime}),n);case"Merchant":var e=b.map((function(e){return e.value}));return r.filter((function(t){return e.includes(t.merchantId)}));case"Status":var t=N.map((function(e){return e.value}));return r.filter((function(e){return t.includes(e.status)}));case"Customer":var a=p()(h()(S));return a?r.filter((function(e){var t=h()(e.customerName);e=h()(e.customerAddress);return i()(a,t)||i()(a,e)})):r;default:return r}}),[r,Z,n,b,N,S]);return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"grid gap-2 block-conditions p-2",children:[(0,w.jsx)(o.Z,{options:y,onSelectOption:j,defaultSelected:Z}),R]}),(0,w.jsx)(f.Z,{data:C,renderItem:function(e){return(0,w.jsx)(x.ZP,{order:e},e.id)}})]})}r.r(t),r.d(t,{default:function(){return M}});var a=r(3917),s=r(6885),c=r(2791),u=r(5022),i=(t=r(806),r.n(t)),o=r(4609),d=r(765),l=r(1095),f=r(1039),p=(t=r(3464),r.n(t)),m=(t=r(5812),r.n(t)),h=(t=r(209),r.n(t)),v=r(6243),x=r(3234),y=[{value:"Status"},{value:"Customer"},{value:"Merchant"},{value:"Created Time"},{value:"Updated Time"}],b=r(1413),Z=(t=r(885),r(1113)),j={direction:"desc",merchants:[],option:y[0].value,status:[],customer:""},g=(Z=(0,Z.M)((function(e,t){return(0,b.Z)((0,b.Z)({},j),{},{actionSetOption:function(t){return e({option:t})},actionSetDirection:function(){e({direction:"desc"===t().direction?"asc":"desc"})},actionSetMerchant:function(t){return e({merchants:t})},actionSetStatus:function(t){return e({status:t})},actionSetCustomer:function(t){return e({customer:t})}})}),"useDashboardOrder"),(0,t.Z)(Z,1)[0]),w=r(184),N=c.memo((function(){return(0,w.jsx)(a.Kf,{userRole:"admin",children:(0,w.jsx)(n,{})})})),k=r(6731),S=c.memo((function(){return(0,w.jsx)(k.rU,{to:"/setting",children:(0,w.jsx)("i",{className:"fa-solid fa-bars text-lg"})})})),A=c.memo((function(e){return e=e.leftTitle,(0,w.jsxs)("div",{className:"flex gap-4 p-2 justify-between items-center",children:[(0,w.jsxs)("div",{className:"grid gap-2 items-center location",children:[(0,w.jsx)("i",{className:"fa-solid fa-location-dot text-primary-color text-base"}),(0,w.jsx)("div",{className:"text-base font-medium",children:e})]}),(0,w.jsxs)("div",{className:"grid gap-4 grid-cols-2",children:[(0,w.jsx)(k.rU,{to:"/message",children:(0,w.jsx)("i",{className:"fa-regular fa-envelope text-lg"})}),(0,w.jsx)(S,{})]})]})})),R=c.memo((function(){return(0,w.jsxs)("div",{children:[(0,w.jsx)(A,{leftTitle:"Admin page"}),(0,w.jsx)(N,{})]})})),C=r(4108);function I(){return(0,w.jsx)("div",{children:"Welcome to baemin!"})}function T(){switch((0,s.q)().userInfo.role){case"customer":return(0,w.jsx)(P,{});case"admin":return(0,w.jsx)(R,{});default:return(0,w.jsx)(I,{})}}Promise.resolve().then(r.bind(r,4108));var P=c.memo((function(){return(0,w.jsxs)("div",{className:"home-page",children:[(0,w.jsx)(A,{leftTitle:"Topaz City"}),(0,w.jsx)(C.default,{})]})})),M=c.memo((function(){return(0,w.jsx)(a.Kf,{userRole:"customer",children:(0,w.jsx)(T,{})})}))},6243:function(e,t,r){r.d(t,{S:function(){return i},P:function(){return u}});var n=r(4165),a=r(5861),s=r(7408),c=(t=r(5824),new(r(7928).Z)({baseURL:"".concat(t.V.REACT_APP_API_DOMAIN_URL)})),u=function(e){var t,r=e.categoryId;return(0,s.useQuery)({queryFn:(t=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c.get("merchant?categoryId=".concat(r));case 4:return t=e.sent,e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),queryKey:["merchant",r],enabled:!!r})},i=function(){var e;return(0,s.useQuery)({queryFn:(e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("merchant-list");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),queryKey:["merchant-list"]})}},5590:function(e,t,r){r.d(t,{LV:function(){return f},zk:function(){return p}});var n=r(4165),a=r(5861),s=r(5671),c=r(3144),u=r(9073),i=function(){function e(t){(0,s.Z)(this,e),this.database=void 0,this.db=void 0,this.database=t}var t,r,i,o,d,l,f,p,m;return(0,c.Z)(e,[{key:"createObjectStore",value:(m=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.X3(this.database,1,{upgrade:function(e){t.forEach((function(t){e.objectStoreNames.contains(t)||e.createObjectStore(t,{autoIncrement:!0,keyPath:"id"})}))}});case 2:return this.db=e.sent,e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getRecord",value:(p=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(t,"readonly")).objectStore(t),e.next=5,a.get(r);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"getAllRecord",value:(f=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(r=(r=this.db).transaction(t,"readonly")).objectStore(t),e.next=5,r.getAll();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=[];case 8:return r=e.t0,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"addRecord",value:(l=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(t,"readwrite")).objectStore(t),e.next=5,a.add(r);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"addRecordByKey",value:(d=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(s=(s=this.db).transaction(t,"readwrite")).objectStore(t),e.next=5,s.add(r,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return d.apply(this,arguments)})},{key:"putBulkRecord",value:(o=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(s=this.db).transaction(t,"readwrite"),a=s.objectStore(t),s=r.map((function(e){return a.add(e)})),e.next=6,Promise.all(s);case 6:return e.abrupt("return",this.getAllRecord(t));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"updateByKey",value:(i=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(t,"readwrite")).objectStore(t),e.next=5,a.put(r);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"deleteRecord",value:(r=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(t,"readwrite")).objectStore(t),e.next=5,a.get(r);case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",s);case 8:return e.next=10,a.delete(r);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"clearTable",value:(t=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(r=(r=this.db).transaction(t,"readwrite")).objectStore(t),e.next=5,r.clear();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),o="order",d="baemin-".concat(o),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new i(d),r=[o],e.next=4,t.createObjectStore(r);case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return r=e.sent,e.next=5,r.addRecord(o,t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return t=e.sent,e.next=5,t.getAllRecord(o);case 5:return t=e.sent,e.abrupt("return",t||[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},8286:function(e,t,r){r.d(t,{AN:function(){return f},KS:function(){return d},hQ:function(){return o},xv:function(){return l}});var n=r(4165),a=r(5861),s=r(7408),c=r(6885),u=r(5590),i=r(1087),o=function(){var e=(0,s.useQueryClient)();return(0,s.useMutation)(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i._O)(t);case 2:return r=(r=e.sent).data,e.next=6,(0,u.LV)(r);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries(["order-history"])}})},d=function(){var e;return(0,s.useQuery)({queryKey:["order-history"],queryFn:(e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.zk)();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},l=function(){var e=(0,c.q)().userInfo,t=d().data;return{orders:(void 0===t?[]:t).filter((function(t){return t.userId===e.id}))}},f=function(){var e;return(0,s.useQuery)({queryKey:["order-status-list"],queryFn:(e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Bw)();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})}},1087:function(e,t,r){r.d(t,{Bw:function(){return s},_O:function(){return a}});t=r(5824);var n=new(r(7928).Z)({baseURL:"".concat(t.V.REACT_APP_API_DOMAIN_URL,"/order")}),a=function(e){return n.put("",e)},s=function(){return n.get("status-list")}},3234:function(e,t,r){r.d(t,{ZP:function(){return o},KS:function(){return i.KS},AN:function(){return i.AN},xv:function(){return i.xv}});var n=r(2791),a=r(4280),s=(t=r(7892),r.n(t)),c=r(6731),u=r(184),i=(t=n.memo((function(e){var t=(e=e.order).id,r=e.orderName,i=e.status,o=e.createdTime,d=e.totalPrice,l=e.paymentMethod,f=e.dishes,p=(e=e.userId,n.useMemo((function(){switch(i){case"Done":return(0,u.jsx)("i",{className:"fa-solid fa-circle-check"});case"Canceled":return(0,u.jsx)("i",{className:"fa-solid fa-triangle-exclamation"});default:return(0,u.jsx)("i",{className:"fa-solid fa-spinner"})}}),[i]));return(0,u.jsxs)(c.rU,{className:"order-item bg-primary-light p-4 border-b-[0.5px] grid items-center gap-1",to:"/order?orderId=".concat(t),children:[(0,u.jsxs)("div",{className:"block-info",children:[(0,u.jsxs)("div",{className:"block-status grid gap-2 items-center text-xs mb-1 text-primary-gray",children:[p,(0,u.jsx)("span",{className:"font-medium",children:i}),(0,u.jsx)("span",{children:(t=o,s()(t).format("DD/MM/YYYY-hh:mm a"))})]}),(0,u.jsx)("div",{className:"mb-2",children:r}),(0,u.jsxs)("div",{className:"block-payment text-xs text-primary-gray",children:[(0,u.jsx)("span",{children:(0,a.e)({value:d})}),(0,u.jsxs)("span",{className:"mx-1",children:["(",l,")"]}),(0,u.jsxs)("span",{children:[f.length," Items"]}),(0,u.jsxs)("span",{className:"ml-1 font-medium",children:["#",e]})]})]}),(0,u.jsx)("i",{className:"fa-solid fa-chevron-right text-primary-gray"})]})})),t=n.memo(t),r(5590),r(1087),r(8286)),o=t},4280:function(e,t,r){r.d(t,{e:function(){return n}});var n=function(e){var t=e.locales,r=e.value;e=e.currency;return new Intl.NumberFormat(void 0===t?"vi-VN":t,{style:"currency",currency:void 0===e?"VND":e}).format(r)}}}]);