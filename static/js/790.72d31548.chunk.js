"use strict";(self.webpackChunkbaemin_fe=self.webpackChunkbaemin_fe||[]).push([[790],{1017:function(e,t,r){function n(e){var t=e.className,r=e.isCenterAbsolute;e=(0,a.Z)(e,o);return(0,i.jsx)("div",(0,s.Z)((0,s.Z)({className:"".concat(r&&"h-8 flex items-center justify-center"," ").concat(t)},e),{},{children:(0,i.jsx)("i",{className:"fa-solid fa-spinner fa-spin-pulse fa-xl text-primary-color"})}))}var s=r(1413),a=r(4925),c=r(2791),i=r(184),o=["className","isCenterAbsolute"];n.defaultProps={className:"",isCenterAbsolute:!0},t.Z=c.memo(n)},4108:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var n=r(1017),s=(t=r(2791),r(1087)),a=r(4165),c=r(5861),i=r(7408),o=r(5824),u=new(r(7928).Z)({baseURL:"".concat(o.V.REACT_APP_API_DOMAIN_URL,"/category")}),d=r(184),l=t.memo((function(){var e,t=(0,i.useQuery)({queryFn:(e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),queryKey:["categories"]}),r=t.isLoading;t=void 0===(t=t.data)?[]:t;return(0,d.jsxs)("div",{className:"grid grid-cols-4 gap-4 items-center justify-center mt-4",children:[r&&(0,d.jsx)(n.Z,{}),t.map((function(e){var t=e.id,r=e.name;e=e.imgURL;return(0,d.jsxs)(s.rU,{className:"",to:"/merchant?categoryId=".concat(t),children:[(0,d.jsx)("div",{className:"h-24",children:(0,d.jsx)("img",{src:e,alt:r})}),(0,d.jsx)("div",{className:"text-center",children:r})]},t)}))]})}))},4790:function(e,t,r){function n(){var e=void 0===(O=(0,Z.S)().data)?[]:O,t=void 0===(O=(0,g.AN)().data)?{}:O,r=void 0===(O=(0,g.KS)().data)?[]:O,n=(O=w()).direction,s=O.actionSetDirection,a=O.actionSetMerchant,i=O.merchants,u=O.option,d=O.actionSetOption,b=O.status,C=O.actionSetStatus,S=O.customer,M=O.actionSetCustomer,O=c.useMemo((function(){switch(u){case"Customer":return(0,o.jsx)(p.Z,{type:"input",containerClassName:"find-by-customer",optionProps:{value:S,onChange:function(e){return M(e.target.value)},placeholder:"Type customer name / address..."}});case"Created Time":case"Updated Time":return(0,o.jsx)(l.e,{direction:n,setDirection:s});case"Merchant":return(0,o.jsx)(x.Z,{options:e.map((function(e){return{value:e.id}})),selected:i,setSelected:function(e){return a(e)}});case"Status":return(0,o.jsx)(x.Z,{options:Object.values(t).map((function(e){return{value:e}})),selected:b,setSelected:function(e){return C(e)}});default:return null}}),[u,n,e,i,y,t,b,S]),A=c.useMemo((function(){switch(u){case"Created Time":return v()(r,(function(e){return e.createdTime}),n);case"Updated Time":return v()(r,(function(e){return e.updatedTime}),n);case"Merchant":var e=i.map((function(e){return e.value}));return r.filter((function(t){return e.includes(t.merchantId)}));case"Status":var t=b.map((function(e){return e.value}));return r.filter((function(e){return t.includes(e.status)}));case"Customer":var s=h()(N()(S));return s?r.filter((function(e){var t=N()(e.customerName);e=N()(e.customerAddress);return m()(s,t)||m()(s,e)})):r;default:return r}}),[r,u,n,i,b,S]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"grid gap-2 block-conditions p-2",children:[(0,o.jsx)(f.Z,{options:y,onSelectOption:d,defaultSelected:u}),O]}),(0,o.jsx)(j.Z,{data:A,renderItem:function(e){return(0,o.jsx)(g.ZP,{order:e},e.id)}})]})}r.r(t),r.d(t,{default:function(){return W}});var s=r(3917),a=r(6885),c=r(2791),i=r(1087),o=r(184),u=c.memo((function(){return(0,o.jsx)(i.rU,{to:"/setting",children:(0,o.jsx)("i",{className:"fa-solid fa-bars text-lg"})})})),d=c.memo((function(e){return e=e.leftTitle,(0,o.jsxs)("div",{className:"flex gap-4 p-2 justify-between items-center",children:[(0,o.jsxs)("div",{className:"grid gap-2 items-center location",children:[(0,o.jsx)("i",{className:"fa-solid fa-location-dot text-primary-color text-base"}),(0,o.jsx)("div",{className:"text-base font-medium capitalize",children:e})]}),(0,o.jsxs)("div",{className:"grid gap-4 grid-cols-2",children:[(0,o.jsx)(i.rU,{to:"/message",children:(0,o.jsx)("i",{className:"fa-regular fa-envelope text-lg"})}),(0,o.jsx)(u,{})]})]})})),l=r(5022),m=(t=r(806),r.n(t)),f=r(4609),x=r(765),p=r(1095),j=r(1039),h=(t=r(3464),r.n(t)),v=(t=r(5812),r.n(t)),N=(t=r(209),r.n(t)),Z=r(6243),g=r(3081),y=[{value:"Status"},{value:"Customer"},{value:"Merchant"},{value:"Created Time"},{value:"Updated Time"}],b=r(1413),C=(t=r(885),r(1113)),S={direction:"desc",merchants:[],option:y[0].value,status:[],customer:""},M=(0,C.M)((function(e,t){return(0,b.Z)((0,b.Z)({},S),{},{actionSetOption:function(t){return e({option:t})},actionSetDirection:function(){e({direction:"desc"===t().direction?"asc":"desc"})},actionSetMerchant:function(t){return e({merchants:t})},actionSetStatus:function(t){return e({status:t})},actionSetCustomer:function(t){return e({customer:t})}})}),"useDashboardOrder"),w=(0,t.Z)(M,1)[0],O=c.memo((function(){return(0,o.jsx)(s.Kf,{userRole:"admin",children:(0,o.jsx)(n,{})})})),A=c.memo((function(){return(0,o.jsx)("div",{children:(0,o.jsx)(O,{})})})),k=r(4108);function I(e){var t=e.order,r=(0,D.useModalStore)().actionCloseModal,n=E().actionAcceptOrder;e=c.useCallback((function(){R.Z.emit("driver-accepted-order",t),n(t),r()}),[t]);return(0,o.jsx)(D.ModalContent,{className:"h-48 left-5 right-5 translate-y-[-50%] top-[50%] flex items-center justify-center",hasBtnCloseModal:!1,children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("i",{className:"fa-solid fa-circle-info text-lg mr-2"}),(0,o.jsxs)("span",{className:"text-base font-medium",children:["Are you want to accept ",(0,o.jsx)("br",{}),"this order?"]})]}),(0,o.jsxs)("span",{className:"text-xs text-primary-gray",children:["(",t.id,")"]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 px-2 mt-4",children:[(0,o.jsx)(l.Z,{type:"default",title:"Cancel",onClick:r}),(0,o.jsx)(l.Z,{title:"OK",onClick:e})]})]})})}function P(e){var t=e.order,r=(0,D.useModalStore)().actionCloseModal,n=B().actionAcceptOrder;e=c.useCallback((function(){R.Z.emit("merchant-accepted-order",t),n(t),r()}),[t]);return(0,o.jsx)(D.ModalContent,{className:"h-48 left-5 right-5 translate-y-[-50%] top-[50%] flex items-center justify-center",hasBtnCloseModal:!1,children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("i",{className:"fa-solid fa-circle-info text-lg mr-2"}),(0,o.jsxs)("span",{className:"text-base font-medium",children:["Are you want to accept ",(0,o.jsx)("br",{}),"this order?"]})]}),(0,o.jsxs)("span",{className:"text-xs text-primary-gray",children:["(",t.id,")"]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 px-2 mt-4",children:[(0,o.jsx)(l.Z,{type:"default",title:"Cancel",onClick:r}),(0,o.jsx)(l.Z,{title:"OK",onClick:e})]})]})})}function T(){return(0,o.jsx)("div",{children:"Welcome to baemin!"})}function U(){var e=(t=(0,a.q)().userInfo).role,t=t.username,r=c.useMemo((function(){switch(e){case"customer":return(0,o.jsx)(_,{});case"admin":return(0,o.jsx)(A,{});case"merchant":return(0,o.jsx)(z,{});case"driver":return(0,o.jsx)(F,{});default:return(0,o.jsx)(T,{})}}),[e]);return(0,o.jsxs)("div",{children:[(0,o.jsx)(d,{leftTitle:"".concat(e,"-").concat(t)}),r]})}Promise.resolve().then(r.bind(r,4108));var _=c.memo((function(){return(0,o.jsx)("div",{className:"home-page",children:(0,o.jsx)(k.default,{})})})),D=r(4482),R=r(7796),q=r(2982),K=(M=r(6339),r.n(M)),L={orders:[]},E=(r=(0,C.D)((function(e,t){return(0,b.Z)((0,b.Z)({},L),{},{actionHasNewOrder:function(r){return e({orders:K()([].concat((0,q.Z)(t().orders),[r]),(function(e){return e.id}))})},actionAcceptOrder:function(r){return e({orders:t().orders.filter((function(e){return e.id!==r.id}))})}})}),"useDriverManageOrdersStore"),(0,t.Z)(r,1)[0]),H=c.memo((function(){var e=(0,D.useModalStore)().actionOpenModal,t=E(),r=t.orders,n=t.actionHasNewOrder;return c.useEffect((function(){R.Z.on("wait-driver-accept-order",(function(e){n(e)}))}),[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"pl-4 font-medium text-base",children:[(0,o.jsx)("i",{className:"fa-solid fa-caravan mr-2"}),(0,o.jsx)("span",{children:"New orders"})]}),(0,o.jsx)(j.Z,{data:r,renderItem:function(t){return(0,o.jsx)(g.ZP,{order:t,onClickOrderItem:function(t){e({content:(0,o.jsx)(I,{order:t})})}},t.id)}})]})})),F=c.memo((function(){return(0,o.jsx)(H,{})})),Q={orders:[]},B=(M=(0,C.D)((function(e,t){return(0,b.Z)((0,b.Z)({},Q),{},{actionHasNewOrder:function(r){return e({orders:K()([].concat((0,q.Z)(t().orders),[r]),(function(e){return e.id}))})},actionAcceptOrder:function(r){return e({orders:t().orders.filter((function(e){return e.id!==r.id}))})}})}),"useMerchantManageOrdersStore"),(0,t.Z)(M,1)[0]),V=c.memo((function(){var e=(0,a.q)().userInfo.username,t=(0,D.useModalStore)().actionOpenModal,r=B(),n=r.orders,s=r.actionHasNewOrder;return c.useEffect((function(){R.Z.on("send-order-to-merchant-".concat(e),(function(e){s(e)}))}),[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"pl-4 font-medium text-base",children:[(0,o.jsx)("i",{className:"fa-solid fa-caravan mr-2"}),(0,o.jsx)("span",{children:"New orders"})]}),(0,o.jsx)(j.Z,{data:n,renderItem:function(e){return(0,o.jsx)(g.ZP,{order:e,onClickOrderItem:function(e){t({content:(0,o.jsx)(P,{order:e})})}},e.id)}})]})})),z=c.memo((function(){return(0,o.jsx)(V,{})})),W=c.memo((function(){return(0,o.jsx)(s.Kf,{userRole:"customer",children:(0,o.jsx)(U,{})})}))},6243:function(e,t,r){r.d(t,{S:function(){return o},P:function(){return i}});var n=r(4165),s=r(5861),a=r(7408),c=(t=r(5824),new(r(7928).Z)({baseURL:"".concat(t.V.REACT_APP_API_DOMAIN_URL)})),i=function(e){var t,r=e.categoryId;return(0,a.useQuery)({queryFn:(t=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c.get("merchant?categoryId=".concat(r));case 4:return t=e.sent,e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),queryKey:["merchant",r],enabled:!!r})},o=function(){var e;return(0,a.useQuery)({queryFn:(e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("merchant-list");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),queryKey:["merchant-list"]})}}}]);