"use strict";(self.webpackChunkbaemin_fe=self.webpackChunkbaemin_fe||[]).push([[183],{9084:function(e,r,t){function n(e){var r=e.title,t=e.onGoBack,n=(0,a.s0)();return(0,c.jsxs)("div",{className:"header flex items-center h-8 border-b-[0.5px] relative p-5 border-b-primary-gray bg-primary-light",children:[(0,c.jsx)("button",{type:"button",className:"",onClick:function(){n(-1),"function"==typeof t&&t()},children:(0,c.jsx)("i",{className:"fa-solid fa-arrow-left text-lg"})}),(0,c.jsx)("div",{className:"absolute left-[50%] translate-x-[-50%]",children:r})]})}t.d(r,{Z:function(){return s}});r=t(2791);var a=t(7689),c=t(184);n.defaultProps={onGoBack:void 0};var s=r.memo(n)},3917:function(e,r,t){function n(e){return function(r){var t=(n=(0,c.q)()).isLoggedIn,n=n.userInfo,u=(0,s.TH)();return t?(t=r.children,r.userRole!==n.role&&"/"!==u.pathname?(0,o.jsx)(s.Fg,{to:"/",replace:!0}):(0,o.jsx)(e,(0,a.Z)((0,a.Z)({},(0,a.Z)({},r)),{},{children:t}))):(0,o.jsx)(s.Fg,{to:"/login",replace:!0})}}t.d(r,{Kf:function(){return u}});var a=t(1413),c=t(6885),s=(t(2791),t(7689)),o=t(184),u=n((function(e){return e.children}));n((function(e){return e.children}))},1039:function(e,r,t){function n(e){var r=e.children,t=e.onEndReached,n=void 0===(s=e.threshold)?10:s,s=e.className,o=e.data,u=e.renderItem;e=a.useCallback((function(e){var r=(e=e.currentTarget).scrollHeight,a=e.scrollTop;r<e.clientHeight+a+n&&"function"==typeof t&&t()}),[t]);return(0,c.jsxs)("div",{className:"scroll-view overflow-x-hidden overflow-y-scroll ".concat(s||""),onScroll:e,children:[o.map((function(e){return u(e)})),r]})}t.d(r,{Z:function(){return s}});var a=t(2791),c=t(184);n.defaultProps={threshold:100,onEndReached:void 0,className:""};var s=a.memo(n)},7928:function(e,r,t){var n=t(1413),a=t(5671),c=t(3144);t=function(){function e(r){r=r.baseURL,(0,a.Z)(this,e),this.baseURL=void 0,this.controller=void 0,this.requestInit=void 0,this.baseURL=r,this.controller=new AbortController,this.requestInit={cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*"},credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer"}}return(0,c.Z)(e,[{key:"get",value:function(e){var r=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,n.Z)((0,n.Z)({},this.requestInit),{},{method:"GET",signal:r})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"post",value:function(e,r){var t=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,n.Z)((0,n.Z)({},this.requestInit),{},{method:"POST",body:JSON.stringify(r),signal:t})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"put",value:function(e,r){var t=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,n.Z)((0,n.Z)({},this.requestInit),{},{method:"PUT",body:JSON.stringify(r),signal:t})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"patch",value:function(e,r){var t=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,n.Z)((0,n.Z)({},this.requestInit),{},{method:"PATCH",body:JSON.stringify(r),signal:t})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"delete",value:function(e,r){var t=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,n.Z)((0,n.Z)({},this.requestInit),{},{method:"DELETE",body:JSON.stringify(r),signal:t})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"abort",value:function(){this.controller.abort()}}]),e}();r.Z=t},208:function(e,r,t){t.d(r,{q:function(){return c}});var n=t(1413),a=(r=t(885),t=t(1113),{isLoggedIn:!1,userInfo:{id:"-1",username:"",password:"",role:"guest",name:""}}),c=(t=(0,t.D)((function(e){return(0,n.Z)((0,n.Z)({},a),{},{actionLoggedIn:function(r){return e({userInfo:r,isLoggedIn:!0})},actionLogout:function(){return e((0,n.Z)({},a))}})}),"useAuthenStore"),(0,r.Z)(t,1)[0])},6885:function(e,r,t){t.d(r,{q:function(){return n.q}});var n=t(208)},3183:function(e,r,t){function n(){var e=(0,o.q)().userInfo;e=(0,a.xv)({userId:null==e?void 0:e.id}).orders;return(0,i.jsxs)("div",{className:"manage-orders bg-primary-light-gray",children:[(0,i.jsx)(c.Z,{title:"My orders"}),(0,i.jsx)(s.Z,{className:"order-list",data:void 0===e?[]:e,renderItem:function(e){return(0,i.jsx)(a.ZP,{order:e},e.id)}})]})}t.r(r),t.d(r,{default:function(){return l}});r=t(2791);var a=t(3234),c=t(9084),s=t(1039),o=t(6885),u=t(3917),i=t(184),l=r.memo((function(){return(0,i.jsx)(u.Kf,{userRole:"customer",children:(0,i.jsx)(n,{})})}))},5590:function(e,r,t){t.d(r,{LV:function(){return f},zk:function(){return h}});var n=t(4165),a=t(5861),c=t(5671),s=t(3144),o=t(9073),u=function(){function e(r){(0,c.Z)(this,e),this.database=void 0,this.db=void 0,this.database=r}var r,t,u,i,l,d,f,h,p;return(0,s.Z)(e,[{key:"createObjectStore",value:(p=(0,a.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.X3(this.database,1,{upgrade:function(e){r.forEach((function(r){e.objectStoreNames.contains(r)||e.createObjectStore(r,{autoIncrement:!0,keyPath:"id"})}))}});case 2:return this.db=e.sent,e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getRecord",value:(h=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(r,"readonly")).objectStore(r),e.next=5,a.get(t);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,r){return h.apply(this,arguments)})},{key:"getAllRecord",value:(f=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=(t=this.db).transaction(r,"readonly")).objectStore(r),e.next=5,t.getAll();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=[];case 8:return t=e.t0,e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"addRecord",value:(d=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(r,"readwrite")).objectStore(r),e.next=5,a.add(t);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,r){return d.apply(this,arguments)})},{key:"addRecordByKey",value:(l=(0,a.Z)((0,n.Z)().mark((function e(r,t,a){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(c=(c=this.db).transaction(r,"readwrite")).objectStore(r),e.next=5,c.add(t,a);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return l.apply(this,arguments)})},{key:"putBulkRecord",value:(i=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(c=this.db).transaction(r,"readwrite"),a=c.objectStore(r),c=t.map((function(e){return a.add(e)})),e.next=6,Promise.all(c);case 6:return e.abrupt("return",this.getAllRecord(r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,r){return i.apply(this,arguments)})},{key:"updateByKey",value:(u=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(r,"readwrite")).objectStore(r),e.next=5,a.put(t);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,r){return u.apply(this,arguments)})},{key:"deleteRecord",value:(t=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=(a=this.db).transaction(r,"readwrite")).objectStore(r),e.next=5,a.get(t);case 5:if(c=e.sent){e.next=8;break}return e.abrupt("return",c);case 8:return e.next=10,a.delete(t);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"clearTable",value:(r=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=(t=this.db).transaction(r,"readwrite")).objectStore(r),e.next=5,t.clear();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),e}(),i="order",l="baemin-".concat(i),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new u(l),t=[i],e.next=4,r.createObjectStore(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,e.next=5,t.addRecord(i,r);case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return r=e.sent,e.next=5,r.getAllRecord(i);case 5:return r=e.sent,e.abrupt("return",r||[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},8286:function(e,r,t){t.d(r,{AN:function(){return f},KS:function(){return l},hQ:function(){return i},xv:function(){return d}});var n=t(4165),a=t(5861),c=t(7408),s=t(6885),o=t(5590),u=t(1087),i=function(){var e=(0,c.useQueryClient)();return(0,c.useMutation)(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u._O)(r);case 2:return t=(t=e.sent).data,e.next=6,(0,o.LV)(t);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries(["order-history"])}})},l=function(){var e;return(0,c.useQuery)({queryKey:["order-history"],queryFn:(e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.zk)();case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},d=function(){var e=(0,s.q)().userInfo,r=l().data;return{orders:(void 0===r?[]:r).filter((function(r){return r.userId===e.id}))}},f=function(){var e;return(0,c.useQuery)({queryKey:["order-status-list"],queryFn:(e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Bw)();case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})}},1087:function(e,r,t){t.d(r,{Bw:function(){return c},_O:function(){return a}});r=t(5824);var n=new(t(7928).Z)({baseURL:"".concat(r.V.REACT_APP_API_DOMAIN_URL,"/order")}),a=function(e){return n.put("",e)},c=function(){return n.get("status-list")}},3234:function(e,r,t){t.d(r,{ZP:function(){return i},KS:function(){return u.KS},AN:function(){return u.AN},xv:function(){return u.xv}});var n=t(2791),a=t(4280),c=(r=t(7892),t.n(r)),s=t(6731),o=t(184),u=(r=n.memo((function(e){var r=(e=e.order).id,t=e.orderName,u=e.status,i=e.createdTime,l=e.totalPrice,d=e.paymentMethod,f=e.dishes,h=(e=e.userId,n.useMemo((function(){switch(u){case"Done":return(0,o.jsx)("i",{className:"fa-solid fa-circle-check"});case"Canceled":return(0,o.jsx)("i",{className:"fa-solid fa-triangle-exclamation"});default:return(0,o.jsx)("i",{className:"fa-solid fa-spinner"})}}),[u]));return(0,o.jsxs)(s.rU,{className:"order-item bg-primary-light p-4 border-b-[0.5px] grid items-center gap-1",to:"/order?orderId=".concat(r),children:[(0,o.jsxs)("div",{className:"block-info",children:[(0,o.jsxs)("div",{className:"block-status grid gap-2 items-center text-xs mb-1 text-primary-gray",children:[h,(0,o.jsx)("span",{className:"font-medium",children:u}),(0,o.jsx)("span",{children:(r=i,c()(r).format("DD/MM/YYYY-hh:mm a"))})]}),(0,o.jsx)("div",{className:"mb-2",children:t}),(0,o.jsxs)("div",{className:"block-payment text-xs text-primary-gray",children:[(0,o.jsx)("span",{children:(0,a.e)({value:l})}),(0,o.jsxs)("span",{className:"mx-1",children:["(",d,")"]}),(0,o.jsxs)("span",{children:[f.length," Items"]}),(0,o.jsxs)("span",{className:"ml-1 font-medium",children:["#",e]})]})]}),(0,o.jsx)("i",{className:"fa-solid fa-chevron-right text-primary-gray"})]})})),r=n.memo(r),t(5590),t(1087),t(8286)),i=r},4280:function(e,r,t){t.d(r,{e:function(){return n}});var n=function(e){var r=e.locales,t=e.value;e=e.currency;return new Intl.NumberFormat(void 0===r?"vi-VN":r,{style:"currency",currency:void 0===e?"VND":e}).format(t)}}}]);