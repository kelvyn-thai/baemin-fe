"use strict";(self.webpackChunkbaemin_fe=self.webpackChunkbaemin_fe||[]).push([[972],{3917:function(t,r,n){n.d(r,{Kf:function(){return i}});var e=n(1413),u=n(6885),o=(n(2791),n(7689)),a=n(184),c=function(t){return function(r){var n=(0,u.q)(),c=n.isLoggedIn,i=n.userInfo,s=(0,o.TH)();if(!c)return(0,a.jsx)(o.Fg,{to:"/login",replace:!0});var f=r.children;return r.userRole!==i.role&&"/"!==s.pathname?(0,a.jsx)(o.Fg,{to:"/",replace:!0}):(0,a.jsx)(t,(0,e.Z)((0,e.Z)({},(0,e.Z)({},r)),{},{children:f}))}},i=c((function(t){return t.children}));c((function(t){return t.children}))},5824:function(t,r,n){n.d(r,{V:function(){return e}});var e={PUBLIC_URL:".",ASSETS_PATH:"".concat(".","/assets"),REACT_APP_API_DOMAIN_URL:"https://baemin-api.herokuapp.com/api",PORT:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_DOMAIN_URL:"https://baemin-api.herokuapp.com/api"}.PORT||8080,REACT_APP_WS_PATH:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_DOMAIN_URL:"https://baemin-api.herokuapp.com/api"}.REACT_APP_WS_PATH||""}},7928:function(t,r,n){var e=n(1413),u=n(5671),o=n(3144),a=function(){function t(r){var n=r.baseURL;(0,u.Z)(this,t),this.baseURL=void 0,this.controller=void 0,this.requestInit=void 0,this.baseURL=n,this.controller=new AbortController,this.requestInit={cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*"},credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer"}}return(0,o.Z)(t,[{key:"get",value:function(t){var r=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(t),(0,e.Z)((0,e.Z)({},this.requestInit),{},{method:"GET",signal:r})).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}},{key:"post",value:function(t,r){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(t),(0,e.Z)((0,e.Z)({},this.requestInit),{},{method:"POST",body:JSON.stringify(r),signal:n})).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}},{key:"put",value:function(t,r){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(t),(0,e.Z)((0,e.Z)({},this.requestInit),{},{method:"PUT",body:JSON.stringify(r),signal:n})).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}},{key:"patch",value:function(t,r){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(t),(0,e.Z)((0,e.Z)({},this.requestInit),{},{method:"PATCH",body:JSON.stringify(r),signal:n})).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}},{key:"delete",value:function(t,r){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(t),(0,e.Z)((0,e.Z)({},this.requestInit),{},{method:"DELETE",body:JSON.stringify(r),signal:n})).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}},{key:"abort",value:function(){this.controller.abort()}}]),t}();r.Z=a},7972:function(t,r,n){n.r(r),n.d(r,{default:function(){return i}});var e=n(3917),u=n(6098),o=n(2791),a=n(184),c=function(){var t=(0,u.KS)().data,r=void 0===t?[]:t;return(0,a.jsx)("div",{children:r.map((function(t){return(0,a.jsx)("div",{children:t.customerName})}))})},i=o.memo((function(){return(0,a.jsx)(e.Kf,{userRole:"admin",children:(0,a.jsx)(c,{})})}))},208:function(t,r,n){n.d(r,{q:function(){return i}});var e=n(1413),u=n(885),o=n(1113),a={isLoggedIn:!1,userInfo:{id:"-1",username:"",password:"",role:"guest",name:""}},c=(0,o.D)((function(t,r){return(0,e.Z)((0,e.Z)({},a),{},{actionLoggedIn:function(r){return t({userInfo:r,isLoggedIn:!0})},actionLogout:function(){return t((0,e.Z)({},a))}})}),"useAuthenStore"),i=(0,u.Z)(c,1)[0]},6885:function(t,r,n){n.d(r,{q:function(){return e.q}});var e=n(208)},5590:function(t,r,n){n.d(r,{LV:function(){return p},zk:function(){return l}});var e=n(4165),u=n(5861),o=n(5671),a=n(3144),c=n(9073),i=function(){function t(r){(0,o.Z)(this,t),this.database=void 0,this.db=void 0,this.database=r}return(0,a.Z)(t,[{key:"createObjectStore",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.X3(this.database,1,{upgrade:function(t){r.forEach((function(r){t.objectStoreNames.contains(r)||t.createObjectStore(r,{autoIncrement:!0,keyPath:"id"})}))}});case 2:return this.db=t.sent,t.abrupt("return",this);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getRecord",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r,n){var u,o,a,c;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.db,o=u.transaction(r,"readonly"),a=o.objectStore(r),t.next=5,a.get(n);case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}()},{key:"getAllRecord",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r){var n,u,o,a;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.db,u=n.transaction(r,"readonly"),o=u.objectStore(r),t.next=5,o.getAll();case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0=[];case 8:return a=t.t0,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"addRecord",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r,n){var u,o,a,c;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.db,o=u.transaction(r,"readwrite"),a=o.objectStore(r),t.next=5,a.add(n);case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}()},{key:"addRecordByKey",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r,n,u){var o,a,c,i;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.db,a=o.transaction(r,"readwrite"),c=a.objectStore(r),t.next=5,c.add(n,u);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)})));return function(r,n,e){return t.apply(this,arguments)}}()},{key:"putBulkRecord",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r,n){var u,o,a,c;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.db,o=u.transaction(r,"readwrite"),a=o.objectStore(r),c=n.map((function(t){return a.add(t)})),t.next=6,Promise.all(c);case 6:return t.abrupt("return",this.getAllRecord(r));case 7:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}()},{key:"updateByKey",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r,n){var u,o,a,c;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.db,o=u.transaction(r,"readwrite"),a=o.objectStore(r),t.next=5,a.put(n);case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}()},{key:"deleteRecord",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r,n){var u,o,a,c;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.db,o=u.transaction(r,"readwrite"),a=o.objectStore(r),t.next=5,a.get(n);case 5:if(c=t.sent){t.next=8;break}return t.abrupt("return",c);case 8:return t.next=10,a.delete(n);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}()},{key:"clearTable",value:function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r){var n,u,o,a;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.db,u=n.transaction(r,"readwrite"),o=u.objectStore(r),t.next=5,o.clear();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),s=i,f="order",d="baemin-".concat(f),h=function(){var t=(0,u.Z)((0,e.Z)().mark((function t(){var r,n;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new s(d),n=[f],t.next=4,r.createObjectStore(n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r){var n,u;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return n=t.sent,t.next=5,n.addRecord(f,r);case 5:return u=t.sent,t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),l=function(){var t=(0,u.Z)((0,e.Z)().mark((function t(){var r,n;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return r=t.sent,t.next=5,r.getAllRecord(f);case 5:return n=t.sent,t.abrupt("return",n||[]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},8286:function(t,r,n){n.d(r,{KS:function(){return h},hQ:function(){return d},xv:function(){return p}});var e=n(4165),u=n(5861),o=n(7408),a=n(7892),c=n.n(a),i=n(6885),s=n(5590),f=n(1087),d=function(){var t=(0,o.useQueryClient)(),r=(0,o.useMutation)(function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r){var n,u;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f._)(r);case 2:return n=t.sent,u=n.data,t.next=6,(0,s.LV)(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),{onSuccess:function(r){console.log("order here",r),t.invalidateQueries(["order-history"])}});return r},h=function(){return(0,o.useQuery)({queryKey:["order-history"],queryFn:function(){return(0,s.zk)()}})},p=function(){var t=(0,i.q)().userInfo,r=h().data;return{orders:(void 0===r?[]:r).filter((function(r){return r.userId===t.id})).sort((function(t,r){return c()(t.createdTime).isBefore(r.createdTime)?1:-1}))}}},1087:function(t,r,n){n.d(r,{_:function(){return o}});var e=n(5824),u=new(n(7928).Z)({baseURL:"".concat(e.V.REACT_APP_API_DOMAIN_URL,"/order")}),o=function(t){return u.put("",t)}},6098:function(t,r,n){n.d(r,{KS:function(){return e.KS},xv:function(){return e.xv}});n(5590),n(1087);var e=n(8286)}}]);
//# sourceMappingURL=972.36f611fa.chunk.js.map